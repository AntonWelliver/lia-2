<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

	<title>Salus mea - Alarm portal</title>

	<link rel="stylesheet" type="text/css" href="css/index_main3.css" />
	<link href="css/loginbox.css" rel="stylesheet" type="text/css" />
       <link rel="icon" href="/alertyFavicon.png" type="image/png">
       <link rel="shortcut icon" href="/alertyFavicon.png" type="image/png">
	<script src="//code.jquery.com/jquery-1.12.4.js"></script>
  	<script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCA1vUw498bcppAYRAMyytc6Kr-oy1wRao&libraries=geometry&sensor=false"></script>
	<script type="text/javascript" src="js/alerty.js"></script>
	<script src="https://api.html5media.info/1.1.5/html5media.min.js"></script>
	<script type="text/javascript">
	function checkNumber(index, form) {
		var number = document.getElementById('phonenr'+index).value;
		if (number != null && number.length > 0) {
			if (number.substr(0,1) != '+') {
				alert('The number must be in a international format (e.g. +46708123456). Please change the number.');
			} else {
				form.submit();
			}
		}
	}
	function contactGroupChanged() {
		location.href = "?contactGroup=" + document.getElementById("contactGroup").value;
	}
	function deleteGroup() {
		if (confirm('Are you sure you want to delete this group? The contacts in this group will be deleted as well.')) {
			document.getElementById('contactgroupaction').value="deletegroup";
			document.getElementById('contactgroupform').submit();
		}
	}
	function doFilter() {
		var text = $('#filter').val().toUpperCase();
		$("form[name*='contact']").hide();
		var usernames = $( "input[name*='username']" );
		usernames.each(function(index) {
			if ($(this).val().toUpperCase().includes(text)) {
				console.log($(this).parents("form"));
				$(this).parents("form").show();				
			}
		});
		var phonenumbers = $( "input[name*='phonenr']" );
		phonenumbers.each(function(index) {
			if ($(this).val().toUpperCase().includes(text)) {
				$(this).parents("form").show();				
			}
		});
	}
	</script>
</head>

<body onload="checkAlertNew();checkStatusesNew();">
	<audio id="alertsound">
		<source src="alert.wav" type="audio/wav" />
	</audio>
	<div id="sound_element"></div>
	<div id="video" class="Popdiv"> 
		<div class="Fader"></div>
		<div class="Overlay">
			<div class="Container" style="width:310px;height:250px">
				<a href="javascript:toggleVisible('video');" class="Close"></a>
				<div class="Content" id="videocontent">
					<iframe id="videoframe" src="" width="265" height="200"> </iframe>
				</div>
			</div>
		</div>
	</div>
	<div id="wrapper">
		<!-- Header -->
        <div id="header"><img id="logo" src="brand/logo.png" class="left">
			<div id="menu" class="">
				<ul>
					<li><a href="main.php" class="imageLink"><img src="images/portalHeader/map.png"/><p>Map</p></a></li>
					<li><a href="users.php" class="imageLink"><img src="images/portalHeader/users.png"/><p>Users</p></a></li>
					<li><a href="contacts.php" class="imageLink"><img src="images/portalHeader/contacts.png"/><p>Contacts</p></a></li>
					<li><a href="wlan.php" class="imageLink"><img src="images/portalHeader/wlan.png"/><p>Wlan</p></a></li>
					<li><a href="archive.php" class="imageLink"><img src="images/portalHeader/alerts.png"/><p>Alarm</p></a></li>
					<li><a href="portalhelp.php" class="imageLink"><img src="images/portalHeader/help.png"/><p>Manual</p></a></li>
					
						<li><a href='main.php?action=logout' class='imageLink'><img src='images/portalHeader/signout.png'/><p>Log out</p></a></li>				</ul>	
			</div>
			<input id="filter" onkeyup="doFilter()" placeholder="Search..." maxlength="20" type="text">
		</div>

		<!-- Sidebar -->
        
			<div id="sidebar">
				<div id="sidebarheader">
					<p class="left">Alarm</p>
					<a href="#" onclick="toggleSound();"><img id="sound" src="images/sound_on.png" class="right"/></a>
				</div>
			
			<div id="alerts">
				<script type='text/javascript'>lastAlert=24979833602514314471;</script><div class='alarm' id='alert24979833602514314471' onclick='javascript:window.location.assign("main.php?action=show&id=24979833602514314471&status=3")' style='cursor:pointer'><div id='status' class='closed'></div><ul class='statusul'><li class='closed'>Closed</li><li class='statusulli'>29/01 15:15</li><li class='statusulli'>Emanuel</li><li class='statusulli' name='userphone'>+46736881065</li><li class='statusulli' name='usercompany'>Salus mea users</li></ul></div><div class='alarm' id='alert26977104983291058997' onclick='javascript:window.location.assign("main.php?action=show&id=26977104983291058997&status=3")' style='cursor:pointer'><div id='status' class='closed'></div><ul class='statusul'><li class='closed'>Closed</li><li class='statusulli'>29/01 15:02</li><li class='statusulli'>Emanuel</li><li class='statusulli' name='userphone'>+46736881065</li><li class='statusulli' name='usercompany'>Salus mea users</li></ul></div><div class='alarm' id='alert12858343736723748929' onclick='javascript:window.location.assign("main.php?action=show&id=12858343736723748929&status=3")' style='cursor:pointer'><div id='status' class='closed'></div><ul class='statusul'><li class='closed'>Closed</li><li class='statusulli'>26/01 23:36</li><li class='statusulli'>Emanuel</li><li class='statusulli' name='userphone'>+46736881065</li><li class='statusulli' name='usercompany'>Salus mea users</li></ul></div><div class='alarm' id='alert77539814874764659816' onclick='javascript:window.location.assign("main.php?action=show&id=77539814874764659816&status=3")' style='cursor:pointer'><div id='status' class='closed'></div><ul class='statusul'><li class='closed'>Closed</li><li class='statusulli'>26/01 23:11</li><li class='statusulli'>Emanuel</li><li class='statusulli' name='userphone'>+46736881065</li><li class='statusulli' name='usercompany'>Salus mea users</li></ul></div><div class='alarm' id='alert68095726401582374383' onclick='javascript:window.location.assign("main.php?action=show&id=68095726401582374383&status=3")' style='cursor:pointer'><div id='status' class='closed'></div><ul class='statusul'><li class='closed'>Closed</li><li class='statusulli'>26/01 23:10</li><li class='statusulli'>Emanuel</li><li class='statusulli' name='userphone'>+46736881065</li><li class='statusulli' name='usercompany'>Salus mea users</li></ul></div><div class='alarm' id='alert54477209241375239840' onclick='javascript:window.location.assign("main.php?action=show&id=54477209241375239840&status=3")' style='cursor:pointer'><div id='status' class='closed'></div><ul class='statusul'><li class='closed'>Closed</li><li class='statusulli'>26/01 15:01</li><li class='statusulli'>Emanuel</li><li class='statusulli' name='userphone'>+46736881065</li><li class='statusulli' name='usercompany'>Salus mea users</li></ul></div><div class='alarm' id='alert12888981454269784372' onclick='javascript:window.location.assign("main.php?action=show&id=12888981454269784372&status=3")' style='cursor:pointer'><div id='status' class='closed'></div><ul class='statusul'><li class='closed'>Closed</li><li class='statusulli'>26/01 14:17</li><li class='statusulli'>Emanuel</li><li class='statusulli' name='userphone'>+46736881065</li><li class='statusulli' name='usercompany'>Salus mea users</li></ul></div><div class='alarm' id='alert33698075211219852616' onclick='javascript:window.location.assign("main.php?action=show&id=33698075211219852616&status=3")' style='cursor:pointer'><div id='status' class='closed'></div><ul class='statusul'><li class='closed'>Closed</li><li class='statusulli'>26/01 13:02</li><li class='statusulli'>Emanuel</li><li class='statusulli' name='userphone'>+46736881065</li><li class='statusulli' name='usercompany'>Salus mea users</li></ul></div><div class='alarm' id='alert55757876654633423440' onclick='javascript:window.location.assign("main.php?action=show&id=55757876654633423440&status=3")' style='cursor:pointer'><div id='status' class='closed'></div><ul class='statusul'><li class='closed'>Closed</li><li class='statusulli'>26/01 12:42</li><li class='statusulli'>Emanuel</li><li class='statusulli' name='userphone'>+46736881065</li><li class='statusulli' name='usercompany'>Salus mea users</li></ul></div><div class='alarm' id='alert51968480912168155291' onclick='javascript:window.location.assign("main.php?action=show&id=51968480912168155291&status=3")' style='cursor:pointer'><div id='status' class='closed'></div><ul class='statusul'><li class='closed'>Closed</li><li class='statusulli'>25/01 23:44</li><li class='statusulli'>Emanuel</li><li class='statusulli' name='userphone'>+46736881065</li><li class='statusulli' name='usercompany'>Salus mea users</li></ul></div><div class='alarm' id='alert75383150557758486958' onclick='javascript:window.location.assign("main.php?action=show&id=75383150557758486958&status=3")' style='cursor:pointer'><div id='status' class='closed'></div><ul class='statusul'><li class='closed'>Closed</li><li class='statusulli'>25/01 23:21</li><li class='statusulli'>Emanuel</li><li class='statusulli' name='userphone'>+46736881065</li><li class='statusulli' name='usercompany'>Salus mea users</li></ul></div><div class='alarm' id='alert40268466852721645593' onclick='javascript:window.location.assign("main.php?action=show&id=40268466852721645593&status=3")' style='cursor:pointer'><div id='status' class='closed'></div><ul class='statusul'><li class='closed'>Closed</li><li class='statusulli'>25/01 23:08</li><li class='statusulli'>Emanuel</li><li class='statusulli' name='userphone'>+46736881065</li><li class='statusulli' name='usercompany'>Salus mea users</li></ul></div><div class='alarm' id='alert60236427685087886510' onclick='javascript:window.location.assign("main.php?action=show&id=60236427685087886510&status=3")' style='cursor:pointer'><div id='status' class='closed'></div><ul class='statusul'><li class='closed'>Closed</li><li class='statusulli'>25/01 22:49</li><li class='statusulli'>Emanuel</li><li class='statusulli' name='userphone'>+46736881065</li><li class='statusulli' name='usercompany'>Salus mea users</li></ul></div>
			</div>
		</div>


		
			

		<!-- Map -->
        <div id="mapContainer">
			<div id="satusdata">
				<div id="statusdataheader">
					<p class="left">Contacts</p>
				</div>
				<div id="contactgroupheader">
					<form id='contactgroupform' action='' method='post'>
					Please select a group:&nbsp;&nbsp;
					<input name='action' id="contactgroupaction" value='creategroup' type='hidden'/>
					<select name="contactGroup" id="contactGroup" onchange="contactGroupChanged()">
					<option value="0" selected>Default</option>
					<option value='1'>Emanuel</option>
					</select>&nbsp;&nbsp;
					Or&nbsp;&nbsp;&nbsp;
					<input name="groupname" type="text" placeholder="Create New Group" style="padding-left:10px"></input>&nbsp;&nbsp;&nbsp;
					<input type="submit" value="Add" style="background:#65DBDB;border: 1px solid #000000;width:100px"/>
					<input type="button" value="Delete" style="background:#B2B2B2;border: 1px solid #000000;width:100px; color:black;" onclick="javascript:deleteGroup()" disabled  />
					</form>
				</div>

				<div id="datadiv" class="dSettings">
					<div class='userinfo'>
						<form name='contact' id='setContactForm664' action='' method='post'>
							<table style='margin:0;padding-top:16px'>
								<tr>
									<td rowspan='2' class='rownum'>1</td>
									<td class='rowhdr'>Name</td>
									<td class='rowinfo'>
										<input name='username' type='text' placeholder='Full name' value='Iphone XR RISE' maxlength='23'/>
									</td>
								<td rowspan='3' class='rowbtn'>
									<div class='savebtn2'>
										<a href='javascript:checkNumber("664", document.getElementById("setContactForm664"))'>
											<img src='images/save.png' alt='save icon'/>
										</a>
									</div>
								</td>
								<td rowspan='3' class='rowbtn'>
									<div class='savebtn2'>
										<a href='javascript:deleteContact(664);'>
											<img src='images/delete.png' alt='save icon'/>
										</a>
									</div>
								</td>
							</tr>
							<tr>
								<td class='rowhdr'>Phone nr</td>
								<td class='rowinfo'>
									<input id='phonenr664' name='phonenr' type='text' placeholder='+46123456789' value='+467100000395389'>
								</td>
							</tr>
								<input type='hidden' name='id' value='664'/>
								<input type='hidden' name='action' id='action664' value='savecontact'/>
								<input type='hidden' name='group' value='0'/>
							</table>
						</form>
					</div>
					<div class='userinfo'>
						<form name='contact' id='setContactForm' action='' method='post'>
							<table style='margin:0;padding-top:16px'>
								<tr>
									<td rowspan='2' class='rownum'>2</td>
									<td class='rowhdr'>Name</td>
									<td class='rowinfo'>
										<input name='username' type='text' placeholder='Full name' value='' maxlength='23'/>
									</td>
									<td rowspan='3' class='rowbtn'>
										<div class='savebtn2'>
											<a href='javascript:checkNumber("", document.getElementById("setContactForm"))'>
												<img src='images/save.png' alt='save icon'/>
											</a>
										</div>
									</td>
								</tr>
								<tr>
									<td class='rowhdr'>Phone nr</td>
									<td class='rowinfo'>
										<input id='phonenr' name='phonenr' type='text' placeholder='+46123456789' value=''>
									</td>
								</tr>
								<input type='hidden' name='id' value=''/>
								<input type='hidden' name='action' value='savecontact'/>
								<input type='hidden' name='group' value='0'/>
							</table>
						</form>
					</div>
					<div class='userinfo'>
						<form name='contact' id='setContactForm' action='' method='post'>
							<table style='margin:0;padding-top:16px'>
								<tr>
									<td rowspan='2' class='rownum'>3</td>
									<td class='rowhdr'>Name</td>
									<td class='rowinfo'>
										<input name='username' type='text' placeholder='Full name' value='' maxlength='23'/>
									</td>
									<td rowspan='3' class='rowbtn'>
										<div class='savebtn2'>
											<a href='javascript:checkNumber("", document.getElementById("setContactForm"))'>
												<img src='images/save.png' alt='save icon'/>
											</a>
										</div>
									</td>
								</tr>
								<tr>
									<td class='rowhdr'>Phone nr</td>
									<td class='rowinfo'>
										<input id='phonenr' name='phonenr' type='text' placeholder='+46123456789' value=''>
									</td>
								</tr>
								<input type='hidden' name='id' value=''/>
								<input type='hidden' name='action' value='savecontact'/>
								<input type='hidden' name='group' value='0'/>
							</table>
						</form>
					</div>				
				</div>
			</div>
		</div>
	</div>

    </div>

<script>
var source = [
{ label : 'Sara Elg', value : '0760250360'}, { label : 'Iphone XR RISE', value : '+467100000395389'}, { label : 'IPhoneXR', value : '0036309203061'}, { label : 'Pixel 3a XL RISE', value : '+467100000395390'}, { label : 'Johannna T', value : '+46739668425'}, { label : 'Emanuel', value : '+46736881065'}, { label : 'Anton Welliver', value : '0046707301293'}, ];

$( "input[name*='username']" ).autocomplete({
  source: source,
  select: function( e, ui ) {
	var t = $(this),
	details = $('#phonenr'),
	label = ( e.type == 'autocompleteresponse' ? ui.content[0].label : ui.item.label ),
	value = ( e.type == 'autocompleteresponse' ? ui.content[0].value : ui.item.value );
	t.val( label );
	details.val( value );
	return false;
  }
});
</script>

</body>

</html>